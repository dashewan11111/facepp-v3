<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>Face++ 人脸关键点SDK 开发集成文档</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
<style type="text/css">

#wmd-preview h1  {
    color: #0077bb; /* 将标题改为蓝色 */
}</style>
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="no56" id="face-人脸关键点sdk-开发集成文档">Face++ 人脸关键点SDK 开发集成文档</h1><hr><p data-anchor-id="oopb"><img src="http://bj-mc-prod-asset.oss-cn-beijing.aliyuncs.com/banner/b608d9c7939cc50a1b5bc18f271c0cee.jpg" alt="bg"></p><p data-anchor-id="8olx"><br></p><div class="md-section-divider"></div><h2 data-anchor-id="9i3w" id="一简介">一、简介</h2><pre data-anchor-id="q4cv"><code>人脸关键点SDK能离线调用Face++的人脸检测、人脸追踪、关键点、人脸比对的功能。完全离线，无需联网，在本地处理所有数据。
</code></pre><div class="md-section-divider"></div><h3 data-anchor-id="xvtt" id="关于版本-052">关于版本： 0.5.2</h3><table data-anchor-id="xugs" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th style="text-align:left;">版本</th>
 <th style="text-align:center;">免费 SDK Demo</th>
 <th style="text-align:center;">在线授权 SDK</th>
 <th style="text-align:center;">离线授权 SDK</th>
</tr>
</thead>
<tbody><tr>
 <td style="text-align:left;">授权方式</td>
 <td style="text-align:center;">在线</td>
 <td style="text-align:center;">在线</td>
 <td style="text-align:center;">离线</td>
</tr>
<tr>
 <td style="text-align:left;">获得途径</td>
 <td style="text-align:center;">官网下载</td>
 <td style="text-align:center;">商务单独打包</td>
 <td style="text-align:center;">商务单独打包</td>
</tr>
<tr>
 <td style="text-align:left;">3D POSE</td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sucess_small.png" alt="image" title=""></td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sucess_small.png" alt="image" title=""></td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sucess_small.png" alt="image" title=""></td>
</tr>
<tr>
 <td style="text-align:left;">人脸检测 detect</td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sucess_small.png" alt="image" title=""></td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sucess_small.png" alt="image" title=""></td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sucess_small.png" alt="image" title=""></td>
</tr>
<tr>
 <td style="text-align:left;">人脸关键点 landmark</td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sucess_small.png" alt="image" title=""></td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sucess_small.png" alt="image" title=""></td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sucess_small.png" alt="image" title=""></td>
</tr>
<tr>
 <td style="text-align:left;">人脸属性 attribute</td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/shibai_small.png" alt="image" title=""></td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sucess_small.png" alt="image" title=""></td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sucess_small.png" alt="image" title=""></td>
</tr>
<tr>
 <td style="text-align:left;">人脸比对 compare</td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/shibai_small.png" alt="image" title=""></td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/shibai_small.png" alt="image" title=""></td>
 <td style="text-align:center;"><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sucess_small.png" alt="image" title=""></td>
</tr>
</tbody></table><div class="md-section-divider"></div><h3 data-anchor-id="snzm" id="功能列表">功能列表</h3><ul data-anchor-id="3v0s">
<li><p>3D POSE <code>免费</code></p>

<blockquote class="white-blockquote">
  <p>返回图片或视频流中人脸头部三维向量方向</p>
</blockquote></li>
<li><p>人脸检测和追踪（detect &amp; track）<code>免费</code></p>

<blockquote class="white-blockquote">
  <p>检测图片或视频流中的人脸并返回人脸框，支持视频流中的人脸追踪。</p>
</blockquote></li>
<li><p>人脸关键点（landmark）<code>免费</code></p>

<blockquote class="white-blockquote">
  <p>返回图片或视频流中人脸五官与轮廓的关键点位置及对应置信度。 <br>
  最多106个点，包括人脸轮廓、眼睛、眉毛、嘴唇以及鼻子。 <br>
  支持视频流中关键点的追踪</p>
</blockquote></li>
<li><p>人脸属性（attribute）<code>付费</code></p>

<blockquote class="white-blockquote">
  <p>返回图片或视频流中人脸的性别、年龄。</p>
</blockquote></li>
<li><p>人脸比对（compare）<code>付费</code></p>

<blockquote class="white-blockquote">
  <p>通过detet 接口保存照片到本地设备，然后再通过图片或者视频进行比对。</p>
</blockquote></li>
</ul><div class="md-section-divider"></div><h3 data-anchor-id="epbc" id="开发组件">开发组件</h3><p data-anchor-id="8u6c">下载的SDK包含包含以下文件:</p><ul data-anchor-id="5vyo">
<li>Android-Demo.zip: 包含一个Android Studio 的demo工程，可以直接用AndroidStudio打开。</li>
<li>doc 文件夹: 包含SDK 主要类的介绍</li>
<li>C_SDK: 包含armeabi-v7a &amp; armeabi-v8a 的so文件 和 Native接口头文件(MG_Facepp.h, MG_Common.h)</li>
</ul><div class="md-section-divider"></div><h3 data-anchor-id="dj6c" id="规格参数">规格参数</h3><table data-anchor-id="vqpe" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>项目</th>
 <th style="text-align:center;">Android</th>
</tr>
</thead>
<tbody><tr>
 <td>系统版本</td>
 <td style="text-align:center;">4.0 +</td>
</tr>
<tr>
 <td>CPU 平台</td>
 <td style="text-align:center;">arm armv7 arm64</td>
</tr>
<tr>
 <td>输入图像要求</td>
 <td style="text-align:center;">NV21 BGR</td>
</tr>
</tbody></table><table data-anchor-id="s22d" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>包大小</th>
 <th style="text-align:center;">Android</th>
</tr>
</thead>
<tbody><tr>
 <td>代码部分</td>
 <td style="text-align:center;">32位 <strong>2.0M</strong>; 64位 <strong>3.2M</strong></td>
</tr>
<tr>
 <td>人脸检测 模型</td>
 <td style="text-align:center;">4.8M</td>
</tr>
<tr>
 <td>人脸关键点track_fast 模型</td>
 <td style="text-align:center;">1.8M</td>
</tr>
<tr>
 <td>人脸关键点track_robust 模型</td>
 <td style="text-align:center;">2.5M</td>
</tr>
<tr>
 <td>人脸属性 模型</td>
 <td style="text-align:center;">2.3M</td>
</tr>
<tr>
 <td>3D POSE 模型</td>
 <td style="text-align:center;">145K</td>
</tr>
</tbody></table><blockquote data-anchor-id="iucp" class="white-blockquote">
  <p>性能参数</p>
</blockquote><table data-anchor-id="d7c5" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th>测试设备</th>
 <th style="text-align:right;">首帧(单位:ms)</th>
 <th style="text-align:right;">追踪Fast(单位:ms)</th>
 <th style="text-align:right;">追踪Robust(单位:ms)</th>
 <th style="text-align:right;">检出率</th>
 <th style="text-align:right;">漏检率</th>
</tr>
</thead>
<tbody><tr>
 <td>nexus 5x(Android 6.0.1 API:23)</td>
 <td style="text-align:right;">108.82</td>
 <td style="text-align:right;">9.38</td>
 <td style="text-align:right;">12.14</td>
 <td style="text-align:right;">98.4%</td>
 <td style="text-align:right;">1.60%</td>
</tr>
</tbody></table><hr><p data-anchor-id="21pk"><br></p><div class="md-section-divider"></div><h2 data-anchor-id="35g4" id="二demo-集成说明">二、Demo 集成说明</h2><blockquote data-anchor-id="e2gl" class="white-blockquote">
  <p><strong>该内容针对 有Android 开发基础的人。基于Android Studio。讲解如何跑通Android SDK Demo 代码。</strong></p>
</blockquote><div class="md-section-divider"></div><h3 data-anchor-id="k1mi" id="集成准备">集成准备</h3><ul data-anchor-id="zp1i">
<li><p>官网申请的试用版（免费版） <strong>API Key</strong> 和 <strong>API Secret</strong>。还没有注册？<a href="https://console.faceplusplus.com.cn/documents/5671787" target="_blank">参考这里</a></p>

<blockquote class="white-blockquote">
  <p><strong>注意：除非你购买了SDK授权（不是账户充值或者Web Api），否则必须使用试用版。</strong></p>
</blockquote></li>
<li><p>下载官网最新 Demo</p>

<blockquote class="white-blockquote">
  <p><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sdk_location_0.png" alt="image" title="">  <br>
  <br>
  <img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/sdk_location_1.png" alt="image" title=""> <br>
  <br>
  <img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/download.png" alt="image" title=""></p>
</blockquote></li>
</ul><p data-anchor-id="1pcu"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="n196" id="开始集成">开始集成</h3><div class="md-section-divider"></div><h4 data-anchor-id="4rs8" id="1-解压下载的sdk压缩包解压android-demozip">1. 解压下载的SDK压缩包，解压Android-Demo.zip。</h4><p data-anchor-id="0itu"><br></p><div class="md-section-divider"></div><h4 data-anchor-id="2jmi" id="2-打开android-studio点击-file-open-选择解压好的-android-demo文件夹点击open或者在android-studio启动页选择-open-an-exiting-android-studio-project如图">2. 打开Android Studio，点击 File --&gt; Open , 选择解压好的 <code>Android-Demo</code>文件夹，点击open。（或者在Android Studio启动页选择 Open an exiting Android Studio project）如图；</h4><blockquote data-anchor-id="i4zq" class="white-blockquote">
  <p><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/new_open.png" alt="image" title=""></p>
</blockquote><p data-anchor-id="htm6"><br></p><div class="md-section-divider"></div><h4 data-anchor-id="xsqd" id="3-编译完成打开-util-类填写试用版-apikey和secret">3. 编译完成,打开 Util 类，填写试用版 api_key和secret</h4><blockquote data-anchor-id="vbih" class="white-blockquote">
  <p><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/demo-2.png" alt="image" title=""> <br>
  <br>
  <img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/demo-1.png" alt="image" title=""></p>
</blockquote><p data-anchor-id="pj6z"><br></p><div class="md-section-divider"></div><h4 data-anchor-id="bwg7" id="4-run">4. Run</h4><div class="md-section-divider"></div><h2 data-anchor-id="csfc" id="三代码流程">三、代码流程</h2><blockquote data-anchor-id="85y2" class="white-blockquote">
  <p>SDK本身只提供核心接口，不涉及上层业务（比如打开摄像头，横竖屏切换等等）。每个开发者的实现方式都不尽相同，所以这些业务模块的代码由客户自己封装完成。SDK demo提供了Face++团队的实现方式。代码仅供参考，只保证接口的调用方式正确和功能演示，不保证满足客户的业务需求。这里只介绍核心接口的调用方式和使用流程。</p>
</blockquote><div class="md-section-divider"></div><div class="flow-diagram theme theme-white" title="点击查看大图" data-anchor-id="ejb2"><svg height="644.125" version="1.1" width="402" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative;" viewBox="0 0 402 644.125" preserveAspectRatio="xMidYMid meet"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.1.2</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block-obj1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><marker id="raphael-marker-endblock33-obj2" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xlink:href="#raphael-marker-block-obj1" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="black" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker></defs><rect x="0" y="0" width="50" height="37" r="20" rx="20" ry="20" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="st" transform="matrix(1,0,0,1,57.75,24.875)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="stt" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,57.75,24.875)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">开始</tspan></text><rect x="0" y="0" width="80" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op" transform="matrix(1,0,0,1,42.75,136.75)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="opt" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,42.75,136.75)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">授权检测</tspan></text><path fill="#ffffff" stroke="#000000" d="M39.375,19.6875L0,39.375L78.75,78.75L157.5,39.375L78.75,0L0,39.375" stroke-width="2" id="cn" class="flowchart" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" transform="matrix(1,0,0,1,4,227.75)"></path><text x="44.375" y="39.375" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="cnt" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,4,227.75)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">授权成功？</tspan></text><rect x="0" y="0" width="80" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op2" transform="matrix(1,0,0,1,42.75,381.375)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="op2t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,42.75,381.375)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">授权成功</tspan></text><rect x="0" y="0" width="155" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op1" transform="matrix(1,0,0,1,5.25,493.25)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="op1t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,5.25,493.25)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">跳转到功能选择页面</tspan></text><rect x="0" y="0" width="50" height="37" r="20" rx="20" ry="20" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="end" transform="matrix(1,0,0,1,57.75,605.125)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="endt" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,57.75,605.125)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">结束</tspan><tspan dy="18" x="10" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></tspan></text><rect x="0" y="0" width="80" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op3" transform="matrix(1,0,0,1,254.25,248.625)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="op3t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,254.25,248.625)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">授权失败</tspan></text><path fill="none" stroke="#000000" d="M82.75,61.875C82.75,61.875,82.75,119.77843877673149,82.75,133.74538152854075" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj2)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M82.75,173.75C82.75,173.75,82.75,213.40409994125366,82.75,224.75043908460066" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj2)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M82.75,306.5C82.75,306.5,82.75,364.4034387767315,82.75,378.37038152854075" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj2)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="87.75" y="316.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" font-size="15px" stroke-width="1"><tspan dy="5.421875" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">yes</tspan></text><path fill="none" stroke="#000000" d="M161.5,267.125C161.5,267.125,235.31270283460617,267.125,251.2429834268405,267.125" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj2)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="166.5" y="257.125" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" font-size="15px" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">no</tspan></text><path fill="none" stroke="#000000" d="M82.75,418.375C82.75,418.375,82.75,476.2784387767315,82.75,490.24538152854075" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj2)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M82.75,530.25C82.75,530.25,82.75,588.1534387767315,82.75,602.1203815285407" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj2)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M294.25,285.625C294.25,285.625,294.25,580.125,294.25,580.125C294.25,580.125,82.75,580.125,82.75,580.125C82.75,580.125,82.75,595.4984445571899,82.75,602.1342477742583" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj2)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg></div><blockquote data-anchor-id="r96v" class="white-blockquote">
  <p>其中 <strong>在线授权流程</strong>如下（离线授权由商务单独打包，不在此讨论）</p>
</blockquote><div class="md-section-divider"></div><div class="flow-diagram theme theme-white" title="点击查看大图" data-anchor-id="j976"><svg height="1051.875" version="1.1" width="938.625" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative;" viewBox="0 0 938.625 1051.875" preserveAspectRatio="xMidYMid meet"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.1.2</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block-obj3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><marker id="raphael-marker-endblock33-obj4" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xlink:href="#raphael-marker-block-obj3" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="black" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker></defs><rect x="0" y="0" width="80" height="37" r="20" rx="20" ry="20" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="st" transform="matrix(1,0,0,1,76.5,41.75)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="stt" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,76.5,41.75)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">开始授权</tspan></text><rect x="0" y="0" width="140" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op" transform="matrix(1,0,0,1,46.5,170.5)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="opt" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,46.5,170.5)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">获取本地授权信息</tspan></text><path fill="#ffffff" stroke="#000000" d="M50.625,25.3125L0,50.625L101.25,101.25L202.5,50.625L101.25,0L0,50.625" stroke-width="2" id="cn" class="flowchart" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" transform="matrix(1,0,0,1,15.25,267.125)"></path><text x="55.625" y="50.625" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="cnt" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,15.25,267.125)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">本地授权成功？</tspan></text><rect x="0" y="0" width="110" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op2" transform="matrix(1,0,0,1,61.5,460.125)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="op2t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,61.5,460.125)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">检验过期时间</tspan></text><path fill="#ffffff" stroke="#000000" d="M56.25,28.125L0,56.25L112.5,112.5L225,56.25L112.5,0L0,56.25" stroke-width="2" id="cn2" class="flowchart" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" transform="matrix(1,0,0,1,4,551.125)"></path><text x="61.25" y="56.25" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="cn2t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,4,551.125)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">授权在有效期内？</tspan><tspan dy="18" x="61.25" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></tspan></text><rect x="0" y="0" width="58.328125" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op5" transform="matrix(1,0,0,1,87.3359,755.375)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="op5t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,87.3359,755.375)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">//占位</tspan><tspan dy="18" x="10" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></tspan></text><rect x="0" y="0" width="80" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op3" transform="matrix(1,0,0,1,76.5,884.125)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="op3t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,76.5,884.125)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">授权通过</tspan></text><rect x="0" y="0" width="50" height="37" r="20" rx="20" ry="20" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="end" transform="matrix(1,0,0,1,91.5,1012.875)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="endt" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,91.5,1012.875)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">结束</tspan><tspan dy="18" x="10" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></tspan></text><rect x="0" y="0" width="140" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op1" transform="matrix(1,0,0,1,325.5,588.875)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="op1t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,325.5,588.875)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">联网获取授权信息</tspan></text><path fill="#ffffff" stroke="#000000" d="M50.625,25.3125L0,50.625L101.25,101.25L202.5,50.625L101.25,0L0,50.625" stroke-width="2" id="cn1" class="flowchart" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" transform="matrix(1,0,0,1,294.25,685.5)"></path><text x="55.625" y="50.625" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="cn1t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,294.25,685.5)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">联网授权成功？</tspan></text><rect x="0" y="0" width="80" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op4" transform="matrix(1,0,0,1,623.25,717.625)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="op4t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,623.25,717.625)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">授权失败</tspan></text><path fill="none" stroke="#000000" d="M116.5,78.75C116.5,78.75,116.5,151.6869695186615,116.5,167.49947658227757" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj4)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M116.5,207.5C116.5,207.5,116.5,252.03639090061188,116.5,264.1273251490202" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj4)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M116.5,368.375C116.5,368.375,116.5,441.3119695186615,116.5,457.12447658227757" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj4)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="121.5" y="378.375" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" font-size="15px" stroke-width="1"><tspan dy="5.421875" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">yes</tspan></text><path fill="none" stroke="#000000" d="M217.75,317.75C217.75,317.75,395.5,317.75,395.5,317.75C395.5,317.75,395.5,556.2917440235615,395.5,585.8765111046087" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj4)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="222.75" y="307.75" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" font-size="15px" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">no</tspan></text><path fill="none" stroke="#000000" d="M116.5,497.125C116.5,497.125,116.5,536.7790999412537,116.5,548.1254390846007" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj4)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M116.5,663.625C116.5,663.625,116.5,736.5619695186615,116.5,752.3744765822776" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj4)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="121.5" y="673.625" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" font-size="15px" stroke-width="1"><tspan dy="5.421875" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">yes</tspan></text><path fill="none" stroke="#000000" d="M229,607.375C229,607.375,306.2179641723633,607.375,322.50612848997116,607.375" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj4)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="234" y="597.375" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" font-size="15px" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">no</tspan></text><path fill="none" stroke="#000000" d="M116.5,792.375C116.5,792.375,116.5,865.3119695186615,116.5,881.1244765822776" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj4)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M116.5,921.125C116.5,921.125,116.5,994.0619695186615,116.5,1009.8744765822776" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj4)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M395.5,625.875C395.5,625.875,395.5,670.4113909006119,395.5,682.5023251490202" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj4)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M395.5,786.75C395.5,786.75,395.5,859.125,395.5,859.125C395.5,859.125,116.5,859.125,116.5,859.125C116.5,859.125,116.5,874.4984445571899,116.5,881.1342477742583" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj4)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="400.5" y="796.75" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" font-size="15px" stroke-width="1"><tspan dy="5.421875" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">yes</tspan></text><path fill="none" stroke="#000000" d="M496.75,736.125C496.75,736.125,601.0913639068604,736.125,620.2477861866355,736.125" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj4)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="501.75" y="726.125" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" font-size="15px" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">no</tspan></text><path fill="none" stroke="#000000" d="M663.25,754.625C663.25,754.625,663.25,987.875,663.25,987.875C663.25,987.875,116.5,987.875,116.5,987.875C116.5,987.875,116.5,1003.2484445571899,116.5,1009.8842477742583" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj4)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg></div><blockquote data-anchor-id="ns0v" class="white-blockquote">
  <p>从以上的授权流程可以看出，购买了次数包的客户<strong>不用担心没次运行程序都会消耗一次授权</strong>。 <br>
  授权是按照设备来的。比如你购买了一年 10,00 次的授权，那么你<strong>在一台设备上使用一年，不卸载重装应用的前提下，仅消耗一次授权</strong>。</p>
</blockquote><hr><p data-anchor-id="5d20"><br></p><div class="md-section-divider"></div><h4 data-anchor-id="sjbb" id="核心代码说明">核心代码说明</h4><p data-anchor-id="dgn3"><br></p><div class="md-section-divider"></div><h4 data-anchor-id="a7nh" id="一loadingactivity-联网授权授权接口v3takelicensefromnetwork">一、LoadingActivity ---- 联网授权授权接口（V3）：takeLicenseFromNetwork</h4><blockquote data-anchor-id="rvi5" class="white-blockquote">
  <p>负责联网授权，只有授权成功之后才能调用SDK的接口。否则，SDK的接口会报错无法调用。</p>
</blockquote><p data-anchor-id="ady3"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="6li1" id="代码调用示例">代码调用示例</h5><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="x5fj" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="typ">LicenseManager</span><span class="pln"> licenseManager </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">LicenseManager</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="apz0" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">licenseManager</span><span class="pun">.</span><span class="pln">takeLicenseFromNetwork</span><span class="pun">(</span></code></li><li class="L1"><code class="language-java"><span class="pln">            </span><span class="typ">Util</span><span class="pun">.</span><span class="pln">CN_LICENSE_URL</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L2"><code class="language-java"><span class="pln">            uuid</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L3"><code class="language-java"><span class="pln">            </span><span class="typ">Util</span><span class="pun">.</span><span class="pln">API_KEY</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L4"><code class="language-java"><span class="pln">            </span><span class="typ">Util</span><span class="pun">.</span><span class="pln">API_SECRET</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L5"><code class="language-java"><span class="pln">            apiName</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L6"><code class="language-java"><span class="pln">            </span><span class="str">"1"</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L7"><code class="language-java"><span class="pln">            </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">LicenseManager</span><span class="pun">.</span><span class="typ">TakeLicenseCallback</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-java"><span class="pln">                    </span><span class="lit">@Override</span></code></li><li class="L9"><code class="language-java"><span class="pln">                    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onSuccess</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"><span class="pln">                        authState</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="str">""</span><span class="pun">);</span></code></li><li class="L1"><code class="language-java"><span class="pln">                    </span><span class="pun">}</span></code></li><li class="L2"><code class="language-java"></code></li><li class="L3"><code class="language-java"><span class="pln">                    </span><span class="lit">@Override</span></code></li><li class="L4"><code class="language-java"><span class="pln">                    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onFailed</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> bytes</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-java"><span class="pln">                        </span><span class="kwd">if</span><span class="pun">(</span><span class="typ">TextUtils</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">(</span><span class="typ">Util</span><span class="pun">.</span><span class="pln">API_KEY</span><span class="pun">)||</span><span class="typ">TextUtils</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">(</span><span class="typ">Util</span><span class="pun">.</span><span class="pln">API_SECRET</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"><span class="pln">                            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="typ">ConUtil</span><span class="pun">.</span><span class="pln">isReadKey</span><span class="pun">(</span><span class="typ">LoadingActivity</span><span class="pun">.</span><span class="kwd">this</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">                                authState</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">,</span><span class="lit">1001</span><span class="pun">,</span><span class="str">""</span><span class="pun">);</span></code></li><li class="L8"><code class="language-java"><span class="pln">                            </span><span class="pun">}</span><span class="kwd">else</span><span class="pun">{</span></code></li><li class="L9"><code class="language-java"><span class="pln">                                authState</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">,</span><span class="lit">1001</span><span class="pun">,</span><span class="str">""</span><span class="pun">);</span></code></li><li class="L0"><code class="language-java"><span class="pln">                            </span><span class="pun">}</span></code></li><li class="L1"><code class="language-java"><span class="pln">                        </span><span class="pun">}</span><span class="kwd">else</span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">                            </span><span class="typ">String</span><span class="pln"> msg</span><span class="pun">=</span><span class="str">""</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">                            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bytes</span><span class="pun">!=</span><span class="kwd">null</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> bytes</span><span class="pun">.</span><span class="pln">length</span><span class="pun">&gt;</span><span class="lit">0</span><span class="pun">){</span></code></li><li class="L4"><code class="language-java"><span class="pln">                                msg</span><span class="pun">=</span><span class="pln">  </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">String</span><span class="pun">(</span><span class="pln">bytes</span><span class="pun">);</span></code></li><li class="L5"><code class="language-java"><span class="pln">                            </span><span class="pun">}</span></code></li><li class="L6"><code class="language-java"><span class="pln">                            authState</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">,</span><span class="pln">i</span><span class="pun">,</span><span class="pln">msg</span><span class="pun">);</span></code></li><li class="L7"><code class="language-java"><span class="pln">                        </span><span class="pun">}</span></code></li><li class="L8"><code class="language-java"><span class="pln">                    </span><span class="pun">}</span></code></li><li class="L9"><code class="language-java"><span class="pln">                </span><span class="pun">});</span></code></li></ol></pre><p data-anchor-id="ssou"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="b160" id="参数说明">参数说明：</h5><blockquote data-anchor-id="xrun" class="white-blockquote">
  <ol>
  <li><strong>url</strong> : 在线授权Api地址。v2的key 用v2的url;v3的key 用v3的url。</li>
  <li><strong>uuid</strong>: 手机唯一序号。(有些设备会无法获取，导致授权失败，请客户随机写一个值)</li>
  <li><strong>key &amp; secret</strong>: 注意使用试用版本的，不要用正式的，除非购买了SDK授权。</li>
  <li><strong>apiName</strong>: 通过 <strong>NativeFaceppAPI.nativeGetApiName()</strong>获取，客户不用操心;</li>
  <li><strong>duration</strong>: 字符串形式的授权时间，测试用户只能写<code>1</code>; 正式版用户写自己购买的授权时间。</li>
  <li><strong>callback</strong>: 授权结果回调。</li>
  </ol>
</blockquote><div class="md-section-divider"></div><h5 data-anchor-id="y6dj" id="返回值说明">返回值说明:</h5><blockquote data-anchor-id="h0h4" class="white-blockquote">
  <p><strong>void</strong> </p>
</blockquote><hr><p data-anchor-id="rfh6"><br></p><div class="md-section-divider"></div><h4 data-anchor-id="7qsv" id="二openglactivity-sdk接口初始化接口-init免费功能">二、<strong>OpenGLActivity ---- SDK接口初始化接口: init（免费功能）</strong></h4><blockquote data-anchor-id="rmxy" class="white-blockquote">
  <p>所有SDK Api在使用前都必须要调用此接口进行初始化。 <br>
  <strong>特别需要注意的是：客户开发必须进行 errorCode 的异常处理！！</strong> <br>
  <strong>特别需要注意的是：客户开发必须进行 errorCode 的异常处理！！</strong> <br>
  <strong>特别需要注意的是：客户开发必须进行 errorCode 的异常处理！！</strong></p>
</blockquote><p data-anchor-id="azjt"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="x0je" id="代码调用示例-1">代码调用示例</h5><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="brrs" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="typ">Facepp</span><span class="pln"> facepp </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Facepp</span><span class="pun">();</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="typ">String</span><span class="pln"> errorCode </span><span class="pun">=</span><span class="pln"> facepp</span><span class="pun">.</span><span class="pln">init</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConUtil</span><span class="pun">.</span><span class="pln">getFileContent</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> R</span><span class="pun">.</span><span class="pln">raw</span><span class="pun">.</span><span class="pln">megviifacepp_0_5_2_model</span><span class="pun">),</span><span class="pln"> isOneFaceTrackig </span><span class="pun">?</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></code></li></ol></pre><p data-anchor-id="vpdg"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="yzo4" id="参数说明-1">参数说明：</h5><blockquote data-anchor-id="r10g" class="white-blockquote">
  <ol>
  <li><strong>context</strong> : 上下文。</li>
  <li><strong>model</strong>: 模型文件的二进制数组。<strong>提供了工具方法，客户不用担心</strong>。</li>
  <li><strong>isOneFaceTrackig</strong>: 是否只检测一张脸? 是: <code>1</code>; 否: <code>0</code>。</li>
  </ol>
</blockquote><div class="md-section-divider"></div><h5 data-anchor-id="khpb" id="返回值说明-1">返回值说明:</h5><blockquote data-anchor-id="edsy" class="white-blockquote">
  <p><strong>errorCode</strong> : 初始化成功返回 <code>null</code>; 失败返回 具体的错误信息;</p>
</blockquote><hr><p data-anchor-id="ej69"><br></p><div class="md-section-divider"></div><h4 data-anchor-id="uli4" id="三openglactivity-人脸检测接口-detectdetect功能免费其中人脸属性收费">三、<strong>OpenGLActivity ---- 人脸检测接口: detect（detect功能免费，其中人脸属性收费）</strong></h4><blockquote data-anchor-id="qfbk" class="white-blockquote">
  <p><strong>SDK最核心接口之一：</strong>负责从一张规定格式（<code>Facepp.IMAGEMODE_BGR</code> 和 <code>Facepp.IMAGEMODE_NV21</code>）的图片/帧数据中 检测出人脸信息。 <br>
  <strong>需要额外注意的是：接口返回值里，除了 trackId、index、confidence、feature, 其余全部需要使用对应的接口获取真实数据。</strong></p>
</blockquote><p data-anchor-id="ff6d"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="c9b5" id="代码调用示例-2">代码调用示例</h5><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="0vra" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="typ">Facepp</span><span class="pln"> facepp </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Facepp</span><span class="pun">();</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="o3y8" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln"> </span><span class="lit">@Override</span></code></li><li class="L1"><code class="language-java"><span class="pln"> </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onPreviewFrame</span><span class="pun">(</span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> imgData</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Camera</span><span class="pln"> camera</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="com">//检测操作放到主线程，防止贴点延迟</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> width </span><span class="pun">=</span><span class="pln"> mICamera</span><span class="pun">.</span><span class="pln">cameraWidth</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> height </span><span class="pun">=</span><span class="pln"> mICamera</span><span class="pun">.</span><span class="pln">cameraHeight</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">long</span><span class="pln"> faceDetectTime_action </span><span class="pun">=</span><span class="pln"> </span><span class="typ">System</span><span class="pun">.</span><span class="pln">currentTimeMillis</span><span class="pun">();</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> orientation </span><span class="pun">=</span><span class="pln"> sensorUtil</span><span class="pun">.</span><span class="pln">orientation</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">orientation </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L9"><code class="language-java"><span class="pln">            rotation </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Angle</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">orientation </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L1"><code class="language-java"><span class="pln">            rotation </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">orientation </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span></code></li><li class="L3"><code class="language-java"><span class="pln">            rotation </span><span class="pun">=</span><span class="pln"> </span><span class="lit">180</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">orientation </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span></code></li><li class="L5"><code class="language-java"><span class="pln">            rotation </span><span class="pun">=</span><span class="pln"> </span><span class="lit">360</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="typ">Angle</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="com">// 图片旋转角度</span></code></li><li class="L7"><code class="language-java"><span class="pln">        setConfig</span><span class="pun">(</span><span class="pln">rotation</span><span class="pun">);</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="com">// 检测图片中的人脸</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Facepp</span><span class="pun">.</span><span class="typ">Face</span><span class="pun">[]</span><span class="pln"> faces </span><span class="pun">=</span><span class="pln"> facepp</span><span class="pun">.</span><span class="pln">detect</span><span class="pun">(</span><span class="pln">imgData</span><span class="pun">,</span><span class="pln"> width</span><span class="pun">,</span><span class="pln"> height</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Facepp</span><span class="pun">.</span><span class="pln">IMAGEMODE_NV21</span><span class="pun">);</span></code></li><li class="L0"><code class="language-java"></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="pun">....省略....</span></code></li><li class="L2"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h5 data-anchor-id="va7s" id="faceppface类">Facepp.Face类</h5><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="r1f1" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln"> </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Face</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> trackID</span><span class="pun">;</span><span class="pln">       </span><span class="com">// 人脸的跟踪标记。</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> index</span><span class="pun">;</span><span class="pln">         </span><span class="com">// 人脸数组下标</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> confidence</span><span class="pun">;</span><span class="pln">  </span><span class="com">// 人脸置信度，为一个 0 ~ 1 之间的浮点数。</span></code></li><li class="L4"><code class="language-java"><span class="pln">                                  </span><span class="com">// 超过 0.5 表示这确实是一个人脸。</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> pitch</span><span class="pun">;</span><span class="pln">    </span><span class="com">// 一个弧度，表示物体顺时针饶x轴旋转的弧度。</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> yaw</span><span class="pun">;</span><span class="pln">      </span><span class="com">// 一个弧度，表示物体顺时针饶y轴旋转的弧度。</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> roll</span><span class="pun">;</span><span class="pln">     </span><span class="com">// 一个弧度，表示物体顺时针饶z轴旋转的弧度。</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pun">[]</span><span class="pln"> leftEyestatus</span><span class="pun">;</span><span class="pln">  </span><span class="com">// 人左眼状态，每个数值表示概率，总和为 1</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pun">[]</span><span class="pln"> rightEyestatus</span><span class="pun">;</span><span class="pln"> </span><span class="com">// 人右眼状态，每个数值表示概率，总和为 1</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pun">[]</span><span class="pln"> moutstatus</span><span class="pun">;</span><span class="pln">     </span><span class="com">// 嘴部状态</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> minority</span><span class="pun">;</span><span class="pln">         </span><span class="com">// 少数民族置信度（对于汉族而言）</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> blurness</span><span class="pun">;</span><span class="pln">         </span><span class="com">// 模糊程度，数值越小表示越清晰，0 ~ 1</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> age</span><span class="pun">;</span><span class="pln">              </span><span class="com">// 年龄，为浮点数</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="com">//男女概率之和为 1</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> female</span><span class="pun">;</span><span class="pln">     </span><span class="com">// 是女性人脸的概率</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> male</span><span class="pun">;</span><span class="pln">       </span><span class="com">// 是男性人脸的概率</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Rect</span><span class="pln"> rect</span><span class="pun">;</span><span class="pln">        </span><span class="com">// 人脸在图像中的位置，以一个矩形框来刻画。</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">PointF</span><span class="pun">[]</span><span class="pln"> points</span><span class="pun">;</span><span class="pln">  </span><span class="com">// 人脸关键点信息。</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> feature</span><span class="pun">;</span><span class="pln">   </span><span class="com">// 人脸特征数据，务必保证其内存大小不低于feature_length</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="4pic"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="0odk" id="参数说明-2">参数说明:</h5><blockquote data-anchor-id="5e9u" class="white-blockquote">
  <ol>
  <li><strong>imgData</strong>: 相机预览(视频流)返回的图片<code>byte[]</code>;</li>
  <li><strong>width</strong>: 图片的宽度。（这里取的是相机宽度）</li>
  <li><strong>height</strong>: 图片的高度。（这里取的是相机高度）</li>
  <li><strong>imageMode</strong>: 图片的类型：目前只支持<code>Facepp.IMAGEMODE_BGR</code> 和 <code>Facepp.IMAGEMODE_NV21</code>;</li>
  </ol>
</blockquote><p data-anchor-id="bko8"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="j7qw" id="返回值说明-2">返回值说明:</h5><blockquote data-anchor-id="y2pm" class="white-blockquote">
  <p><strong>faces[]</strong>: Face 对象数组。包含检测图片中的所有人脸。每一个人脸都是Face 对象。 </p>
</blockquote><div class="md-section-divider"></div><h5 data-anchor-id="hjvy" id="face-关键字段说明">Face 关键字段说明:</h5><ul data-anchor-id="ur6h">
<li>confidence：人脸置信度。为一个 0 ~ 1 之间的浮点数。</li>
<li>rect: 人脸在图像中的位置，以一个矩形框来刻画。 <br>


<blockquote class="white-blockquote">
  <p>需要先调用 <code>getRect</code> 才能得到正确的值。</p></blockquote></li>
  <li>feature： 表示人脸特征值。</li>
  <li><p>points： 里面存储关键点信息。关键点跟人脸位置的匹配看下面的图。</p><p></p>


<blockquote class="white-blockquote">
  <p>想要获取该值需要执行下 <code>getLandmarkRaw</code> 或者 <code>getLandmark</code> 接口。参考下文。</p>
</blockquote></li>
<li><p>pitch、yaw、roll： 表示的是头部的各种偏斜的弧度值。</p>

<blockquote class="white-blockquote">
  <p>需要先调用一下 <code>get3DPose</code>接口。参考下文。</p>
</blockquote></li>
<li>minority： 少数民族的置信度。 <br>


<blockquote class="white-blockquote">
  <p>需要先调用一下 <code>getMinorityStatus</code>接口。参考下文。 </p></blockquote></li>
  <li><p>blurness：人脸模糊度。<code>收费</code></p><p></p>


<blockquote class="white-blockquote">
  <p>需要先调用 <code>getBlurness</code> 才能得到正确的值。</p>
</blockquote></li>
<li><p>age、male、female：性别。<code>收费</code></p>

<blockquote class="white-blockquote">
  <p>想要得到年龄、性别信息，需要先调用下 <code>getAgeGender</code> 接口。</p>
</blockquote></li>
<li>leftEyestatus： 左眼镜状态。<code>收费</code></li>
<li><p>rightEyestatus： 右眼镜状态。<code>收费</code></p>

<blockquote class="white-blockquote">
  <p>想要获取眼睛状态，需要先调用下 <code>getEyeStatus</code> 接口。 <br>
  leftEyestatus、rightEyestatus 都这两个属性都包含以下字段。 <br>
  每个字段的值都是一个浮点数，范围 [0,100]，小数点后 3 位有效数字。字段值的总和等于 100。 <br>
  <strong>按数组下标排列为：</strong></p>
  
  <ol><li><strong>occlusion：</strong>眼睛被遮挡的置信度。</li>
  <li><strong>no_glass_eye_open：</strong>不戴眼镜且睁眼的置信度</li>
  <li><strong>normal_glass_eye_close：</strong>佩戴普通眼镜且闭眼的置信度</li>
  <li><strong>normal_glass_eye_open：</strong>佩戴普通眼镜且睁眼的置信度</li>
  <li><strong>dark_glasses：</strong>佩戴墨镜的置信度</li>
  <li><strong>no_glass_eye_close：</strong>不戴眼镜且闭眼的置信度</li></ol>
</blockquote></li>
<li><p>moutstatus: 嘴部状态。<code>收费</code></p>

<blockquote class="white-blockquote">
  <p>想要获取嘴部状态信需要调用 <code>getMouthStatus</code> 接口。 <br>
  moutstatus包括以下字段。每个字段的值都是一个浮点数，范围 [0,100]，小数点后 3 位有效数字。字段值的总和等于 100。 <br>
  <strong>按数组下标排列为：</strong></p>
  
  <ol><li><strong>surgical_mask_or_respirator：</strong>嘴部被医用口罩或呼吸面罩遮挡的置信度</li>
  <li><strong>other_occlusion：</strong>嘴部被其他物体遮挡的置信度</li>
  <li><strong>close：</strong>嘴部没有遮挡且闭上的置信度</li>
  <li><strong>open：</strong>嘴部没有遮挡且张开的置信度</li></ol>
</blockquote></li>
</ul><hr><p data-anchor-id="k2jr"><br></p><div class="md-section-divider"></div><h4 data-anchor-id="wiz7" id="四openglactivity-人脸比对接口-compare-付费功能">四、<strong>OpenGLActivity ---- 人脸比对接口: compare （付费功能）</strong></h4><blockquote data-anchor-id="boa5" class="white-blockquote">
  <p><strong>SDK最核心接口之二：</strong>负责比较两个人脸（特征信息）是不是同一人。成功则返回 <code>人脸特征信息</code>；失败则返回  <code>null</code>；</p>
</blockquote><p data-anchor-id="7daj"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="6qqu" id="功能使用流程">功能使用流程</h5><div class="md-section-divider"></div><div class="flow-diagram theme theme-white" title="点击查看大图" data-anchor-id="x0jj"><svg height="589" version="1.1" width="221" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative;" viewBox="0 0 221 589" preserveAspectRatio="xMidYMid meet"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.1.2</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block-obj5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><marker id="raphael-marker-endblock33-obj6" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xlink:href="#raphael-marker-block-obj5" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="black" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker></defs><rect x="0" y="0" width="50" height="37" r="20" rx="20" ry="20" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="st" transform="matrix(1,0,0,1,86.5,4)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="stt" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,86.5,4)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">开始</tspan></text><rect x="0" y="0" width="154.8125" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op0" transform="matrix(1,0,0,1,34.0938,95)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="op0t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,34.0938,95)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">首页点击 "人脸比对"</tspan></text><rect x="0" y="0" width="188.984375" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op1" transform="matrix(1,0,0,1,17.0078,186)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="op1t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,17.0078,186)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">预览界面点击 "注册" 按钮</tspan></text><rect x="0" y="0" width="110" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op2" transform="matrix(1,0,0,1,56.5,277)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="op2t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,56.5,277)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">等待注册成功</tspan></text><rect x="0" y="0" width="215" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op3" transform="matrix(1,0,0,1,4,368)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="op3t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,4,368)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">选择注册的图片作为底库图片</tspan></text><rect x="0" y="0" width="185" height="37" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op4" transform="matrix(1,0,0,1,19,459)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="op4t" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,19,459)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">返回预览页面后自动识别</tspan></text><rect x="0" y="0" width="50" height="37" r="20" rx="20" ry="20" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="en" transform="matrix(1,0,0,1,86.5,550)"></rect><text x="10" y="18.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 15px; line-height: normal; font-family: Arial;" id="ent" class="flowchartt" font-size="15px" transform="matrix(1,0,0,1,86.5,550)" stroke-width="1"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">结束</tspan><tspan dy="18" x="10" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></tspan></text><path fill="none" stroke="#000000" d="M111.5,41C111.5,41,111.5,80.65409994125366,111.5,92.00043908460066" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj6)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M111.5,132C111.5,132,111.5,171.65409994125366,111.5,183.00043908460066" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj6)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M111.5,223C111.5,223,111.5,262.65409994125366,111.5,274.00043908460066" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj6)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M111.5,314C111.5,314,111.5,353.65409994125366,111.5,365.00043908460066" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj6)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M111.5,405C111.5,405,111.5,444.65409994125366,111.5,456.00043908460066" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj6)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#000000" d="M111.5,496C111.5,496,111.5,535.6540999412537,111.5,547.0004390846007" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj6)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg></div><p data-anchor-id="r0sr"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="rtzc" id="代码调用示例-3">代码调用示例</h5><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="wcjq" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="typ">FeatureInfo</span><span class="pln"> featureInfo </span><span class="pun">=</span><span class="pln"> </span><span class="typ">FaceCompareManager</span><span class="pun">.</span><span class="pln">instance</span><span class="pun">().</span><span class="pln">compare</span><span class="pun">(</span><span class="pln">facepp</span><span class="pun">,</span><span class="pln"> face</span><span class="pun">.</span><span class="pln">feature</span><span class="pun">);</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="hgsb" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">synchronized</span><span class="pln"> </span><span class="typ">FeatureInfo</span><span class="pln"> compare</span><span class="pun">(</span><span class="typ">Facepp</span><span class="pln"> facepp</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> target</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">double</span><span class="pln"> likeMax </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="typ">FeatureInfo</span><span class="pln"> infoBest </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">FeatureInfo</span><span class="pln"> featureInfo </span><span class="pun">:</span><span class="pln"> mFeatureData</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="language-java"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">featureInfo</span><span class="pun">.</span><span class="pln">isSelected</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-java"><span class="pln">                </span><span class="com">// 真正开始调用人脸比对</span></code></li><li class="L6"><code class="language-java"><span class="pln">                </span><span class="kwd">double</span><span class="pln"> like </span><span class="pun">=</span><span class="pln"> facepp</span><span class="pun">.</span><span class="pln">faceCompare</span><span class="pun">(</span><span class="pln">featureInfo</span><span class="pun">.</span><span class="pln">feature</span><span class="pun">,</span><span class="pln"> target</span><span class="pun">);</span></code></li><li class="L7"><code class="language-java"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">like </span><span class="pun">&gt;</span><span class="pln"> BEST_LIKE_VALUE </span><span class="pun">&amp;&amp;</span><span class="pln"> like </span><span class="pun">&gt;</span><span class="pln"> likeMax</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-java"><span class="pln">                    likeMax </span><span class="pun">=</span><span class="pln"> like</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pln">                    infoBest </span><span class="pun">=</span><span class="pln"> featureInfo</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="pln">                </span><span class="pun">}</span></code></li><li class="L1"><code class="language-java"><span class="pln">            </span><span class="pun">}</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> infoBest</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="m89z"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="6alr" id="参数说明-3">参数说明</h5><blockquote data-anchor-id="r25o" class="white-blockquote">
  <ol>
  <li><strong>byte[] feature1：</strong> 本地存储的人脸特征信息（detect 接口获得）；</li>
  <li><strong>byte[] feature2：</strong> 动态获取的（视频流/图片）人脸特征信息（也是detect 获得）；</li>
  </ol>
</blockquote><div class="md-section-divider"></div><h5 data-anchor-id="oqrc" id="返回值说明-3">返回值说明</h5><blockquote data-anchor-id="v99h" class="white-blockquote">
  <p><strong>like：</strong>相似度，<code>double</code> 类型。也就是置信度。默认是<code>73</code>。这个用户可以自定义；</p>
</blockquote><hr><p data-anchor-id="124g"><br></p><div class="md-section-divider"></div><h4 data-anchor-id="av5e" id="五各种辅助接口">五、各种辅助接口</h4><blockquote data-anchor-id="k1dg" class="white-blockquote">
  <p>出于某些因素的考虑，detect 接口返回的数据本身不是真实数据（除了trackId、index、confidence、feature）。因此真实数据需要先调用各自对应的接口。这些接口会将真实数据赋值给原先不正确的返回值。这个时候，detect 的返回值才能使用。 <br>
  这些接口包括： <br>
  1. 获取关键点真实数据  ----  getLandmark / getLandmarkRaw <br>
  2. 获取年龄性别  ----  getAgeGender <br>
  3. 获取少数民族  ----  getMinorityStatus <br>
  4. 获取人脸3D内的弧度值 ----  get3DPose <br>
  5. 获取眼睛状态  -----  getEyeStatus <br>
  6. 获取嘴巴状态 ----  getMouthStatus <br>
  7. 获取模糊度 ----  getBlurness <br>
  8. 获取人脸框 ----  getRect</p>
</blockquote><p data-anchor-id="m25l"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="g1jf" id="1-获取关键点真实数据-getlandmark-getlandmarkraw">1. 获取关键点真实数据  ----  getLandmark / getLandmarkRaw</h5><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="owpb" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code class="language-java"><span class="com">     * @brief 获取人脸的Landmark会旋转为竖直方向, jni会旋转, 需要原始数据使用getLandmarkRaw</span></code></li><li class="L2"><code class="language-java"><span class="com">     * &lt;p&gt;</span></code></li><li class="L3"><code class="language-java"><span class="com">     * 获取指定人脸的Landmark信息，并改变传入的人脸信息</span></code></li><li class="L4"><code class="language-java"><span class="com">     * @param[in, out] face 人脸信息</span></code></li><li class="L5"><code class="language-java"><span class="com">     * @param[in] pointNum 需要的人脸关键点点数</span></code></li><li class="L6"><code class="language-java"><span class="com">     */</span></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="lit">@Deprecated</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> getLandmark</span><span class="pun">(</span><span class="typ">Face</span><span class="pln"> face</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> pointNum</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">isLoadSuccess</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">float</span><span class="pun">[]</span><span class="pln"> points </span><span class="pun">=</span><span class="pln"> </span><span class="typ">NativeFaceppAPI</span><span class="pun">.</span><span class="pln">nativeLandMark</span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pun">,</span><span class="pln"> face</span><span class="pun">.</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> pointNum</span><span class="pun">);</span></code></li><li class="L6"><code class="language-java"><span class="pln">        loadFacePointsInfo</span><span class="pun">(</span><span class="pln">face</span><span class="pun">,</span><span class="pln"> points</span><span class="pun">,</span><span class="pln"> pointNum</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code class="language-java"></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L0"><code class="language-java"><span class="com">     * @brief 获取人脸的Landmark原始数据</span></code></li><li class="L1"><code class="language-java"><span class="com">     * &lt;p&gt;</span></code></li><li class="L2"><code class="language-java"><span class="com">     * 获取指定人脸的Landmark信息，并改变传入的人脸信息</span></code></li><li class="L3"><code class="language-java"><span class="com">     * @param[in, out] face 人脸信息</span></code></li><li class="L4"><code class="language-java"><span class="com">     * @param[in] pointNum 需要的人脸关键点点数</span></code></li><li class="L5"><code class="language-java"><span class="com">     */</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> getLandmarkRaw</span><span class="pun">(</span><span class="typ">Face</span><span class="pln"> face</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> pointNum</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">isLoadSuccess</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">float</span><span class="pun">[]</span><span class="pln"> points </span><span class="pun">=</span><span class="pln"> </span><span class="typ">NativeFaceppAPI</span><span class="pun">.</span><span class="pln">nativeLandMarkRaw</span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pun">,</span><span class="pln"> face</span><span class="pun">.</span><span class="pln">index</span><span class="pun">,</span><span class="pln"> pointNum</span><span class="pun">);</span></code></li><li class="L1"><code class="language-java"><span class="pln">        loadFacePointsInfo</span><span class="pun">(</span><span class="pln">face</span><span class="pun">,</span><span class="pln"> points</span><span class="pun">,</span><span class="pln"> pointNum</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="uohn"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="rosy" id="2-获取年龄性别-getagegender">2. 获取年龄性别  ----  getAgeGender</h5><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="csdo" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code class="language-java"><span class="com">     * @return 调用是否成功</span></code></li><li class="L2"><code class="language-java"><span class="com">     * @brief 获取指定人脸的年龄性别属性信息，并改变传入的人脸信息</span></code></li><li class="L3"><code class="language-java"><span class="com">     * @param[in, out] face 人脸信息</span></code></li><li class="L4"><code class="language-java"><span class="com">     * @return boolean 是否成功</span></code></li><li class="L5"><code class="language-java"><span class="com">     */</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> getAgeGender</span><span class="pun">(</span><span class="typ">Face</span><span class="pln"> face</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">isLoadSuccess</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> abilities </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">!</span><span class="pln">abilities</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="typ">Ability</span><span class="pun">.</span><span class="pln">AGEGENDER</span><span class="pun">))</span></code></li><li class="L1"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">float</span><span class="pun">[]</span><span class="pln"> points </span><span class="pun">=</span><span class="pln"> </span><span class="typ">NativeFaceppAPI</span><span class="pun">.</span><span class="pln">nativeAgeGender</span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pun">,</span><span class="pln"> face</span><span class="pun">.</span><span class="pln">index</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">        loadFaceAgeGenderInfo</span><span class="pun">(</span><span class="pln">face</span><span class="pun">,</span><span class="pln"> points</span><span class="pun">);</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="tevz"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="d0dd" id="3-获取少数民族-getminoritystatus">3. 获取少数民族  ----  getMinorityStatus</h5><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="6qoa" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code class="language-java"><span class="com">     * @return 调用是否成功</span></code></li><li class="L2"><code class="language-java"><span class="com">     * @brief 获取指定人脸的民族属性信息，并改变传入的人脸信息</span></code></li><li class="L3"><code class="language-java"><span class="com">     * @param[in, out] face 人脸信息</span></code></li><li class="L4"><code class="language-java"><span class="com">     */</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> getMinorityStatus</span><span class="pun">(</span><span class="typ">Face</span><span class="pln"> face</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">isLoadSuccess</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> abilities </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">!</span><span class="pln">abilities</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="typ">Ability</span><span class="pun">.</span><span class="pln">MINORITY</span><span class="pun">))</span></code></li><li class="L0"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">float</span><span class="pun">[]</span><span class="pln"> points </span><span class="pun">=</span><span class="pln"> </span><span class="typ">NativeFaceppAPI</span><span class="pun">.</span><span class="pln">nativeMinority</span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pun">,</span><span class="pln"> face</span><span class="pun">.</span><span class="pln">index</span><span class="pun">);</span></code></li><li class="L2"><code class="language-java"><span class="pln">        loadFaceMinorityInfo</span><span class="pun">(</span><span class="pln">face</span><span class="pun">,</span><span class="pln"> points</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="5oym"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="edkz" id="4-获取人脸3d内的弧度值-get3dpose">4. 获取人脸3D内的弧度值 ----  get3DPose</h5><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="g3ac" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code class="language-java"><span class="com">     * @return 调用是否成功</span></code></li><li class="L2"><code class="language-java"><span class="com">     * @brief 获取指定人脸的 3DPose 属性信息，并改变传入的人脸信息</span></code></li><li class="L3"><code class="language-java"><span class="com">     * @param[in, out] face 人脸信息</span></code></li><li class="L4"><code class="language-java"><span class="com">     */</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> get3DPose</span><span class="pun">(</span><span class="typ">Face</span><span class="pln"> face</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">isLoadSuccess</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> abilities </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">!</span><span class="pln">abilities</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="typ">Ability</span><span class="pun">.</span><span class="pln">POSE</span><span class="pun">))</span></code></li><li class="L0"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">float</span><span class="pun">[]</span><span class="pln"> points </span><span class="pun">=</span><span class="pln"> </span><span class="typ">NativeFaceppAPI</span><span class="pun">.</span><span class="pln">nativePose3D</span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pun">,</span><span class="pln"> face</span><span class="pun">.</span><span class="pln">index</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">        loadFace3DPoseInfo</span><span class="pun">(</span><span class="pln">face</span><span class="pun">,</span><span class="pln"> points</span><span class="pun">);</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="esca"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="swtc" id="5-获取眼睛状态-geteyestatus">5. 获取眼睛状态  -----  getEyeStatus</h5><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="rqw8" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">   </span><span class="com">/**</span></code></li><li class="L1"><code class="language-java"><span class="com">     * @return 调用是否成功</span></code></li><li class="L2"><code class="language-java"><span class="com">     * @brief 获取指定人脸的眼睛属性信息，并改变传入的人脸信息</span></code></li><li class="L3"><code class="language-java"><span class="com">     * @param[in, out] face 人脸信息</span></code></li><li class="L4"><code class="language-java"><span class="com">     */</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> getEyeStatus</span><span class="pun">(</span><span class="typ">Face</span><span class="pln"> face</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">isLoadSuccess</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> abilities </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">!</span><span class="pln">abilities</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="typ">Ability</span><span class="pun">.</span><span class="pln">EYESTATUS</span><span class="pun">))</span></code></li><li class="L0"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">float</span><span class="pun">[]</span><span class="pln"> points </span><span class="pun">=</span><span class="pln"> </span><span class="typ">NativeFaceppAPI</span><span class="pun">.</span><span class="pln">nativeEyeStatus</span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pun">,</span><span class="pln"> face</span><span class="pun">.</span><span class="pln">index</span><span class="pun">);</span></code></li><li class="L2"><code class="language-java"><span class="pln">        loadFaceEyeStatusInfo</span><span class="pun">(</span><span class="pln">face</span><span class="pun">,</span><span class="pln"> points</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="41aw"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="zu9e" id="6-获取嘴巴状态-getmouthstatus">6. 获取嘴巴状态 ----  getMouthStatus</h5><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="bfgy" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code class="language-java"><span class="com">     * @return 调用是否成功</span></code></li><li class="L2"><code class="language-java"><span class="com">     * @brief 获取指定人脸的嘴巴属性信息，并改变传入的人脸信息</span></code></li><li class="L3"><code class="language-java"><span class="com">     * @param[in, out] face 人脸信息</span></code></li><li class="L4"><code class="language-java"><span class="com">     */</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> getMouthStatus</span><span class="pun">(</span><span class="typ">Face</span><span class="pln"> face</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">isLoadSuccess</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> abilities </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">!</span><span class="pln">abilities</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="typ">Ability</span><span class="pun">.</span><span class="pln">MOUTHSTATUS</span><span class="pun">))</span></code></li><li class="L0"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">float</span><span class="pun">[]</span><span class="pln"> points </span><span class="pun">=</span><span class="pln"> </span><span class="typ">NativeFaceppAPI</span><span class="pun">.</span><span class="pln">nativeMouthStatus</span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pun">,</span><span class="pln"> face</span><span class="pun">.</span><span class="pln">index</span><span class="pun">);</span></code></li><li class="L2"><code class="language-java"><span class="pln">        loadFaceMouthStatusInfo</span><span class="pun">(</span><span class="pln">face</span><span class="pun">,</span><span class="pln"> points</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="jsl9"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="5t6b" id="7-获取模糊度-getblurness">7. 获取模糊度 ----  getBlurness</h5><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="b069" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code class="language-java"><span class="com">     * @return 调用是否成功</span></code></li><li class="L2"><code class="language-java"><span class="com">     * @brief 获取指定人脸的模糊程度，并改变传入的人脸信息</span></code></li><li class="L3"><code class="language-java"><span class="com">     * @param[in, out] face 人脸信息</span></code></li><li class="L4"><code class="language-java"><span class="com">     */</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> getBlurness</span><span class="pun">(</span><span class="typ">Face</span><span class="pln"> face</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">isLoadSuccess</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> abilities </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">!</span><span class="pln">abilities</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="typ">Ability</span><span class="pun">.</span><span class="pln">BLURNESS</span><span class="pun">))</span></code></li><li class="L0"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">float</span><span class="pun">[]</span><span class="pln"> points </span><span class="pun">=</span><span class="pln"> </span><span class="typ">NativeFaceppAPI</span><span class="pun">.</span><span class="pln">nativeBlurness</span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pun">,</span><span class="pln"> face</span><span class="pun">.</span><span class="pln">index</span><span class="pun">);</span></code></li><li class="L2"><code class="language-java"><span class="pln">        loadFaceBlurnessInfo</span><span class="pun">(</span><span class="pln">face</span><span class="pun">,</span><span class="pln"> points</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="4ptp"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="mwbf" id="8-获取人脸框-getrect">8. 获取人脸框 ----  getRect</h5><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="2g1q" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code class="language-java"><span class="com">     * @brief 获取指定人脸的年龄性别属性信息，并改变传入的人脸信息</span></code></li><li class="L2"><code class="language-java"><span class="com">     * @param[in, out] face 人脸信息</span></code></li><li class="L3"><code class="language-java"><span class="com">     */</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> getRect</span><span class="pun">(</span><span class="typ">Face</span><span class="pln"> face</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">isLoadSuccess</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L9"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">float</span><span class="pun">[]</span><span class="pln"> rectArray </span><span class="pun">=</span><span class="pln"> </span><span class="typ">NativeFaceppAPI</span><span class="pun">.</span><span class="pln">nativeRect</span><span class="pun">(</span><span class="typ">FaceppHandle</span><span class="pun">,</span><span class="pln"> face</span><span class="pun">.</span><span class="pln">index</span><span class="pun">);</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">        face</span><span class="pun">.</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">left </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln"> rectArray</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span></code></li><li class="L3"><code class="language-java"><span class="pln">        face</span><span class="pun">.</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">top </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln"> rectArray</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span></code></li><li class="L4"><code class="language-java"><span class="pln">        face</span><span class="pun">.</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">right </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln"> rectArray</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span></code></li><li class="L5"><code class="language-java"><span class="pln">        face</span><span class="pun">.</span><span class="pln">rect</span><span class="pun">.</span><span class="pln">bottom </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln"> rectArray</span><span class="pun">[</span><span class="lit">3</span><span class="pun">];</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="oeyf"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="cvlh" id="9-获取sdk配置信息接口-getconfig免费功能">9. 获取SDK配置信息接口: getConfig（免费功能）</h5><blockquote data-anchor-id="af4f" class="white-blockquote">
  <p>SDK可以设置一些配置信息（比如每次检测间隔时间，最小能识别的人脸大小），并根据这些配置信息来工作。该接口可以获取这些信息。</p>
</blockquote><p data-anchor-id="llha"><br></p><div class="md-section-divider"></div><h6 data-anchor-id="ln30" id="代码调用示例-4">代码调用示例</h6><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="4pv6" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln"> </span><span class="typ">Facepp</span><span class="pun">.</span><span class="typ">FaceppConfig</span><span class="pln"> faceppConfig </span><span class="pun">=</span><span class="pln"> facepp</span><span class="pun">.</span><span class="pln">getFaceppConfig</span><span class="pun">();</span></code></li></ol></pre><div class="md-section-divider"></div><h6 data-anchor-id="4dw7" id="faceppconfig类">FaceppConfig类</h6><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="89qo" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">FaceppConfig</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> DETECTION_MODE_NORMAL </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> DETECTION_MODE_TRACKING </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> DETECTION_MODE_TRACKING_FAST </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> DETECTION_MODE_TRACKING_ROBUST </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> DETECTION_MODE_TRACKING_RECT </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MG_FPP_DETECTIONMODE_TRACK_RECT </span><span class="pun">=</span><span class="pln"> </span><span class="lit">6</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> minFaceSize</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> rotation</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> interval</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> detectionMode</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> roi_left</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> roi_top</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> roi_right</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> roi_bottom</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> face_confidence_filter</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> one_face_tracking</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">FaceppConfig</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="w5v3"><br></p><div class="md-section-divider"></div><h6 data-anchor-id="ym62" id="参数说明-4">参数说明:</h6><blockquote data-anchor-id="pwoq" class="white-blockquote">
  <ol>
  <li><strong>context</strong> : 上下文。</li>
  <li><strong>model</strong>: 模型文件的二进制数组。<strong>提供了工具方法，客户不用担心</strong>。</li>
  <li><strong>isOneFaceTrackig</strong>: 是否只检测一张脸? 是: <code>1</code>; 否: <code>0</code>。</li>
  </ol>
</blockquote><div class="md-section-divider"></div><h6 data-anchor-id="9cvd" id="返回值说明-4">返回值说明:</h6><blockquote data-anchor-id="kgoc" class="white-blockquote">
  <p><strong>faceppConfig</strong> : <code>FaceppConfig</code>对象实例。</p>
</blockquote><hr><p data-anchor-id="rinu"><br></p><div class="md-section-divider"></div><h5 data-anchor-id="jwmg" id="10-给sdk设置配置信息接口-setconfig免费功能">10. 给SDK设置配置信息接口: setConfig（免费功能）</h5><blockquote data-anchor-id="df63" class="white-blockquote">
  <p>SDK可以设置一些配置信息（比如每次检测间隔时间，最小能识别的人脸大小），并根据这些配置信息来工作。该接口可以设置配置信息。</p>
</blockquote><p data-anchor-id="x3rf"><br></p><div class="md-section-divider"></div><h6 data-anchor-id="dypt" id="代码调用示例-5">代码调用示例</h6><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="i71q" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="typ">Facepp</span><span class="pun">.</span><span class="typ">FaceppConfig</span><span class="pln"> faceppConfig </span><span class="pun">=</span><span class="pln"> facepp</span><span class="pun">.</span><span class="pln">getFaceppConfig</span><span class="pun">();</span></code></li><li class="L1"><code class="language-java"><span class="pln">faceppConfig</span><span class="pun">.</span><span class="pln">interval </span><span class="pun">=</span><span class="pln"> detection_interval</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="pln">faceppConfig</span><span class="pun">.</span><span class="pln">minFaceSize </span><span class="pun">=</span><span class="pln"> min_face_size</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">faceppConfig</span><span class="pun">.</span><span class="pln">roi_left </span><span class="pun">=</span><span class="pln"> left</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">faceppConfig</span><span class="pun">.</span><span class="pln">roi_top </span><span class="pun">=</span><span class="pln"> top</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="pln">faceppConfig</span><span class="pun">.</span><span class="pln">roi_right </span><span class="pun">=</span><span class="pln"> right</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">faceppConfig</span><span class="pun">.</span><span class="pln">roi_bottom </span><span class="pun">=</span><span class="pln"> bottom</span><span class="pun">;</span><span class="pln"> </span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> array </span><span class="pun">=</span><span class="pln"> getResources</span><span class="pun">().</span><span class="pln">getStringArray</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">array</span><span class="pun">.</span><span class="pln">trackig_mode_array</span><span class="pun">);</span></code></li><li class="L7"><code class="language-java"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">trackModel</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">array</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]))</span></code></li><li class="L8"><code class="language-java"><span class="pln">      faceppConfig</span><span class="pun">.</span><span class="pln">detectionMode </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Facepp</span><span class="pun">.</span><span class="typ">FaceppConfig</span><span class="pun">.</span><span class="pln">DETECTION_MODE_TRACKING_FAST</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">trackModel</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">array</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]))</span></code></li><li class="L0"><code class="language-java"><span class="pln">      faceppConfig</span><span class="pun">.</span><span class="pln">detectionMode </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Facepp</span><span class="pun">.</span><span class="typ">FaceppConfig</span><span class="pun">.</span><span class="pln">DETECTION_MODE_TRACKING_ROBUST</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">trackModel</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">array</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">      faceppConfig</span><span class="pun">.</span><span class="pln">detectionMode </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Facepp</span><span class="pun">.</span><span class="typ">FaceppConfig</span><span class="pun">.</span><span class="pln">MG_FPP_DETECTIONMODE_TRACK_RECT</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">      isShowFaceRect </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pun">}</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="pln">facepp</span><span class="pun">.</span><span class="pln">setFaceppConfig</span><span class="pun">(</span><span class="pln">faceppConfig</span><span class="pun">);</span></code></li></ol></pre><div class="md-section-divider"></div><h6 data-anchor-id="m2pz" id="faceppconfig类-1">FaceppConfig类</h6><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ymxk" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">FaceppConfig</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> DETECTION_MODE_NORMAL </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> DETECTION_MODE_TRACKING </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> DETECTION_MODE_TRACKING_FAST </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> DETECTION_MODE_TRACKING_ROBUST </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> DETECTION_MODE_TRACKING_RECT </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> MG_FPP_DETECTIONMODE_TRACK_RECT </span><span class="pun">=</span><span class="pln"> </span><span class="lit">6</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> minFaceSize</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> rotation</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> interval</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> detectionMode</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> roi_left</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> roi_top</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> roi_right</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> roi_bottom</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> face_confidence_filter</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> one_face_tracking</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">FaceppConfig</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="6glh"><br></p><div class="md-section-divider"></div><h6 data-anchor-id="krqf" id="参数说明-5">参数说明:</h6><blockquote data-anchor-id="5gtv" class="white-blockquote">
  <p><strong>FaceppConfig类的所有可赋值的变量;</strong></p>
</blockquote><div class="md-section-divider"></div><h6 data-anchor-id="oy7g" id="返回值说明-5">返回值说明:</h6><blockquote data-anchor-id="d71y" class="white-blockquote">
  <p><strong>void</strong> </p>
</blockquote><hr><p data-anchor-id="u3rw"><br></p><div class="md-section-divider"></div><h2 data-anchor-id="taw6" id="四常见问题-以及-联系方式">四、<a href="https://console.faceplusplus.com.cn/documents/4888368" target="_blank">常见问题</a> 以及 联系方式</h2><ul data-anchor-id="cv67">
<li><a href="https://www.faceplusplus.com.cn/contact-us/" target="_blank">工单系统</a></li>
<li>iOS技术支持: QQ 2915925191</li>
<li>Android技术支持: QQ 3081671610</li>
<li>售前咨询1: QQ 3520579216</li>
<li>售前咨询2: QQ 1738085687</li>
</ul><hr><p data-anchor-id="vmmp"><br></p><div class="md-section-divider"></div><h3 data-anchor-id="mo55" id="常见开发类问题">常见开发类问题</h3><div class="md-section-divider"></div><h4 data-anchor-id="kfih" id="问-如何修改横屏">问： 如何修改横屏？</h4><blockquote data-anchor-id="0o6v" class="white-blockquote">
  <p>这个问题本不属于我们解答范围，但是很多客户是拿demo代码直接copy到自己的项目，然后各种问为什么不能横屏。实在不厌其烦，所以说下代码如何修改横屏。</p>
</blockquote><div class="md-section-divider"></div><h4 data-anchor-id="0hx5" id="答按照以下步骤修改代码">答：按照以下步骤修改代码。</h4><p data-anchor-id="1ra1"><strong>1. manifest 文件修改activity为横屏。</strong></p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="l4mz" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">android</span><span class="pun">:</span><span class="pln">screenOrientation</span><span class="pun">=</span><span class="str">"landscape"</span></code></li></ol></pre><p data-anchor-id="jkyn"><strong>2. 将 OpenGLActivity 的 onDrawFrame 方法的</strong> </p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="p99q" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="typ">Matrix</span><span class="pun">.</span><span class="pln">setLookAtM</span><span class="pun">(</span><span class="pln">mVMatrix</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0f</span><span class="pun">);</span></code></li></ol></pre><p data-anchor-id="m0ts">修改为</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="dkfb" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="typ">Matrix</span><span class="pun">.</span><span class="pln">setLookAtM</span><span class="pun">(</span><span class="pln">mVMatrix</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0f</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0f</span><span class="pun">);</span></code></li></ol></pre><p data-anchor-id="h0g9"><strong>3. 将 CameraMatrix 的变量</strong></p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="sgy2" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="com">// 直角坐标系</span></code></li><li class="L1"><code class="language-java"><span class="kwd">static</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> squareCoords</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pln"> </span><span class="pun">};</span></code></li></ol></pre><p data-anchor-id="z2j6">修改为</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="j0bj" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="com">// 直角坐标系</span></code></li><li class="L1"><code class="language-java"><span class="kwd">static</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> squareCoords</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pln"> </span><span class="pun">};</span></code></li></ol></pre><p data-anchor-id="mtw3"><strong>4. 修改预览尺寸: 将ICamera getLayoutParam方法修改为</strong></p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="3lo4" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="com">// 通过屏幕参数、相机预览尺寸计算布局参数</span></code></li><li class="L1"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="typ">RelativeLayout</span><span class="pun">.</span><span class="typ">LayoutParams</span><span class="pln"> getLayoutParam</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> layout_width </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Screen</span><span class="pun">.</span><span class="pln">mWidth</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> layout_height </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Screen</span><span class="pun">.</span><span class="pln">mHeight</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="typ">RelativeLayout</span><span class="pun">.</span><span class="typ">LayoutParams</span><span class="pln"> layout_params </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RelativeLayout</span><span class="pun">.</span><span class="typ">LayoutParams</span><span class="pun">(</span></code></li><li class="L7"><code class="language-java"><span class="pln">                layout_width</span><span class="pun">,</span><span class="pln"> layout_height</span><span class="pun">);</span></code></li><li class="L8"><code class="language-java"><span class="pln">        layout_params</span><span class="pun">.</span><span class="pln">addRule</span><span class="pun">(</span><span class="typ">RelativeLayout</span><span class="pun">.</span><span class="pln">CENTER_HORIZONTAL</span><span class="pun">);</span><span class="com">// 设置照相机水平居中</span></code></li><li class="L9"><code class="language-java"></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> layout_params</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="ksnw"><br></p><div class="md-section-divider"></div><h4 data-anchor-id="dt7g" id="title"> </h4><div class="md-section-divider"></div><h4 data-anchor-id="j8k8" id="问如何检测单张图片不用视频流的帧数据">问：如何检测单张图片？不用视频流的帧数据。</h4><div class="md-section-divider"></div><h4 data-anchor-id="rxvl" id="答加-android技术支持-qq-3081671610-获取示例代码">答：加 Android技术支持 QQ 3081671610 获取示例代码</h4><blockquote data-anchor-id="s4i4" class="white-blockquote">
  <p>detect 接口接收的是<code>Facepp.IMAGEMODE_BGR</code> 和 <code>Facepp.IMAGEMODE_NV21</code> 两种格式的图片数据。因此，单张图片需要转换为这两种格式之一。</p>
</blockquote><p data-anchor-id="kfub"><br></p><div class="md-section-divider"></div><h4 data-anchor-id="3i0i" id="title-1"> </h4><div class="md-section-divider"></div><h4 data-anchor-id="frke" id="问返回的关键点怎么对应到人脸上">问：返回的关键点怎么对应到人脸上？</h4><div class="md-section-divider"></div><h4 data-anchor-id="igjr" id="答如下图">答：如下图</h4><blockquote data-anchor-id="63dg" class="white-blockquote">
  <p><strong>---------------------------------81个点的对应图----------------------------------</strong></p>
  
  <p><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/81_points_position.jpg" alt="81个点"></p>
</blockquote><p data-anchor-id="uywu"><br></p><blockquote data-anchor-id="nftw" class="white-blockquote">
  <p><strong>---------------------------------106个点的对应图---------------------------------</strong></p>
  
  <p><img src="https://images-1256032145.cos.ap-beijing.myqcloud.com/106_points_position.jpg" alt="106个点"></p>
</blockquote><hr></div>
</body>
</html>